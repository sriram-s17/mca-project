{% extends 'base.html' %}

{% block title %}Edit Variant{% endblock %}

{% load user_custom_tags %}

{% block menubar %}
    {% if request.user|has_group:"owner" %}
        {% include 'owner_menu.html' %}
    {% elif request.user|has_group:"salesman" %}
        {% include 'salesman_menu.html' %}
    {% endif %}
{% endblock %}

{% block content %}
<h1>Edit Variant Details</h1>

<p>Edit variant detail of the product '{{variant.product_ref}}'</p>

<a href="/products/"><button>Back to Products</button></a>

{% if message %}
<p class="success-message">{{message}}</p>
{% endif %}

<form action="" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{variant_form}}
    {{detail_form}}
    {{attr_value_formset.management_form}}
    {% for form in attr_value_formset%}
        {{form}}
    {% endfor %}
    {{selling_price_form}}
    {% if price_formset %}
        {{price_formset.management_form}}
        <h3>Price Variants</h3>
        <span>only the price variants with stock quantity greater than zero are shown</span>
            {% for form in price_formset %}
                <div class="price_set">
                    {{form}}
                </div>
            {% endfor %}
    {% elif selling_price_form is None %}
    <h3>Price Variants</h3>
    <p>There is no stocks in this product, so its price variants are not shown</p>
    {% endif %}
    <button type="submit">Save</button>
</form>
<script>
</script>
{% endblock %}